<!--

 @CardWrapComponent
 @Authors: Jawoon Kim, Charlie Wiegand (PBT3H19A)
 @Erstellt am: 18.09.2020

 -->
<div
  [ngStyle]="trackHorizontal"
  class="cards__wrapper"
  fxLayout="row"
  fxLayoutAlign="center center">
  <div
    class="no-data">
  </div>
  <!-- Cards -->
  <div
    *ngFor="let post of posts; let i = index"
    [ngClass]=
      "{
        '--active': i === currentActivePost,
        '--hovered': post.isHovered && i !== currentActivePost
      }"
    (mouseenter)="post.isHovered = true"
    (mouseleave)="post.isHovered = false"
    (click)="onCardClick(i)"
    class="cards__card"
    fxLayout="column"
    fxLayoutAlign="start start">
    <!-- Image -->
    <img
      fxFlexAlign="center"
      class="cards__img"
      [ngClass]="{'--active': i === currentActivePost}"
      (click)="onImageView(post.imgUrl)"
      [src]="post.imgUrl">
    <!-- Topic -->
    <div
      class="header__wrapper"
      fxLayout="row">
      <p
        class="cards__topic">
        {{ post.topic }}
      </p>
      <button
        *ngIf="userEmail === post.userEmail"
        (click)="onDelete(post.id)"
        class="--extra-actions">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
    <!-- Type -->
    <p
      [ngClass]="{'--suche': post.type === 'Suche'}"
      class="cards__type">
      {{ post.type }}
    </p>
    <p
      class="cards__title">
      {{ post.title }}
    </p>
    <p
      class="cards__content">
      {{ post.content }}
    </p>
    <div
      class="cards__footer"
      fxLayout="row"
      fxLayoutAlign="space-between center">
      <div
        class="cards__user">
        <img
          class="cards__user--img"
          [src]="post.userImg ? post.userImg : 'https://www.w3schools.com/html/img_girl.jpg'">
        <span
          class="cards__user--name">
            {{ post.userEmail.split('@')[0] }}
          </span>
      </div>
      <div
        class="cards__date">
        <mat-icon>access_time</mat-icon>
        <span
          class="cards__date--text">
            {{ post.datePosted | date:"short" }}
          </span>
      </div>
    </div>
  </div>
</div>

